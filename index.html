<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tarot — Shuffle from Stack (Y-slide) — Complete</title>
<style>
:root{
  --bg:#000; --muted:#9aa4b2; --accent:#f6b042;
  --card-w:120px; --card-h:170px;
  --shuffle-anim-duration:0.12s;
}
html,body{height:100%;margin:0}
body{background:var(--bg);color:#eef2f7;font-family:"Noto Sans JP",system-ui,-apple-system;padding:18px}
.wrap{max-width:1200px;margin:0 auto}
.header{display:flex;justify-content:space-between;align-items:center;gap:12px}
.small{font-size:13px;color:var(--muted)}
.controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin:12px 0}
input[type=number]{width:80px;padding:8px;border-radius:8px;border:0;background:#07111a;color:#fff}
button{padding:8px 12px;border-radius:8px;border:0;background:linear-gradient(180deg,var(--accent),#e89b27);color:#08101a;cursor:pointer}
.panel{display:flex;gap:18px;align-items:flex-start;flex-wrap:wrap}
.left{width:320px}
.shuffle-area{width:320px;height:380px;border-radius:14px;background:linear-gradient(180deg,#071018,#041018);display:flex;align-items:flex-start;justify-content:center;position:relative;border:1px solid rgba(255,255,255,0.03);padding-top:20px;box-sizing:border-box}
.card-frame{width:240px;height:340px;perspective:1400px;position:relative}
/* container rotation handled by .card-inner.faceDown / .card-inner.revealed */
.card-inner{width:100%;height:100%;position:relative;transform-style:preserve-3d;transition:transform .45s cubic-bezier(.2,.9,.2,1)}
/* front/back faces for slots */
.back-face{ position:absolute; inset:0; border-radius:12px; backface-visibility:hidden; background-size:cover; background-position:center; background-repeat:no-repeat; }
.front-face{ position:absolute; inset:0; border-radius:12px; backface-visibility:hidden; overflow:hidden; transform: rotateY(180deg); }
.front-face img{width:100%;height:100%;object-fit:cover;display:block; transition:transform .25s linear;}
.hud{position:absolute;left:12px;bottom:12px;color:var(--muted);font-size:13px;background:rgba(0,0,0,0.32);padding:8px 10px;border-radius:10px}
.slots{display:flex;flex-wrap:wrap;gap:12px;max-width:820px}
.slot{width:var(--card-w);height:var(--card-h);border-radius:8px;background:linear-gradient(180deg,#06121a,#081a22);display:flex;align-items:center;justify-content:center;position:relative;border:1px solid rgba(255,255,255,0.03)}
.slot .inner{width:100%;height:100%;border-radius:6px;position:relative;perspective:900px}
.slot .card-inner{width:100%;height:100%;position:relative;transform-style:preserve-3d;transition:transform .45s}
.slot .back-face,.slot .front-face{position:absolute;inset:0;border-radius:6px;backface-visibility:hidden;overflow:hidden}
.slot .back-face{ background: linear-gradient(180deg,#0b1524,#08121a); background-size:cover; background-position:center; }
.slot .front-face{ transform: rotateY(180deg); background:#fff; }
.slot img{width:100%;height:100%;object-fit:cover;display:block}
.index-badge{position:absolute;left:6px;top:6px;background:rgba(0,0,0,0.6);padding:4px 6px;border-radius:6px;font-size:12px}
.card-inner.faceDown{ transform: rotateY(0deg); }   /* 裏が見える */
.card-inner.revealed{ transform: rotateY(180deg); } /* 表が見える */

/* -------------------------
   STACK (face area) styling
   ------------------------- */
#stackArea{ position:absolute; top:12px; left:50%; transform:translateX(-50%); width:220px; height:26
