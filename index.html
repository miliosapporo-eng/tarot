<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tarot Shuffle & Draw</title>

<style>
  :root{
    --bg:#000;
    --panel:#0b0f14;
    --accent:#d4a74d;
    --muted:#77808a;
  }

  html,body { margin:0; padding:0; background:var(--bg); color:#fff; font-family: "Noto Sans JP", sans-serif; }

  header {
    padding:14px 20px;
    background:#000;
    border-bottom:1px solid rgba(255,255,255,0.08);
    font-size:18px;
    font-weight:700;
  }

  .container {
    padding:20px;
    max-width:1200px;
    margin:0 auto;
  }

  .controls {
    display:flex;
    gap:14px;
    align-items:center;
    flex-wrap:wrap;
    margin-bottom:18px;
  }

  select, button {
    padding:10px 14px;
    border-radius:8px;
    border:0;
    font-size:15px;
  }

  select {
    background:#111;
    color:#fff;
  }

  button {
    background:var(--accent);
    color:#000;
    font-weight:700;
    cursor:pointer;
  }

  button.secondary {
    background:#222;
    color:var(--muted);
  }

  .main-area {
    display:flex;
    gap:30px;
    flex-wrap:wrap;
  }

  /* カード束（中央） */
  .stack-area {
    width:240px;
    height:340px;
    border:1px solid rgba(255,255,255,0.12);
    border-radius:14px;
    display:flex;
    align-items:center;
    justify-content:center;
    background:#050505;
    position:relative;
    overflow:hidden;
  }

  .stack-card {
    width:200px;
    height:300px;
    background-size:cover;
    background-position:center;
    border-radius:10px;
    position:absolute;
    transform:translateY(0);
    transition:transform 0.15s linear;
  }

  /* デッキ（結果配置場所） */
  .deck-area {
    flex:1;
    display:grid;
    gap:14px;
    grid-template-columns: repeat(auto-fill, minmax(120px,1fr));
  }

  .deck-slot {
    width:120px;
    height:180px;
    border-radius:10px;
    border:1px solid rgba(255,255,255,0.15);
    display:flex;
    align-items:center;
    justify-content:center;
    background:#090909;
    position:relative;
  }

  /* デッキ内の裏面 */
  .deck-card-back {
    width:100%;
    height:100%;
    background-size:cover;
    background-position:center;
    border-radius:10px;
  }

  /* 手札（引いたカードの表面） */
  .hand-area {
    margin-top:30px;
    padding-top:20px;
    border-top:1px solid rgba(255,255,255,0.1);
  }

  .hand-cards {
    display:flex;
    gap:12px;
    flex-wrap:wrap;
  }

  .hand-card {
    width:140px;
    height:220px;
    background-size:cover;
    background-position:center;
    border-radius:10px;
  }
</style>
</head>
<body>

<header>Tarot Shuffle & Draw</header>

<div class="container">

  <div class="controls">
    <label>スプレッド：</label>

    <select id="spreadSelect">
      <option value="1">ワンオラクル（1）</option>

      <option value="2">ツーオラクル（2）</option>
      <option value="2">ツーマインド（2）</option>
      <option value="2">シンプルクロス（2）</option>

      <option value="3">スリーカード（3）</option>
      <option value="3">ゴールデントリン・スプレッド（3）</option>

      <option value="4">フォーカード（4）</option>

      <option value="5">ギリシャ十字（5）</option>

      <option value="6">ピラミッド（6）</option>

      <option value="7">ヘキサグラムスプレッド（7）</option>
      <option value="7">二者択一（7）</option>

      <option value="10">ケルト十字スプレッド（10）</option>

      <option value="13">ホロスコープ・スプレッド（13）</option>
    </select>

    <button id="startBtn">シャッフル開始</button>
    <button id="drawBtn" class="secondary">1枚引く</button>
    <button id="revealBtn" class="secondary">めくる</button>
  </div>

  <div class="main-area">

    <div class="stack-area" id="stackArea">
      <!-- シャッフルアニメ用カード -->
      <div id="stackCard" class="stack-card"></div>
    </div>

    <div class="deck-area" id="deckArea">
      <!-- ここにデッキ枠（空欄）が生成される -->
    </div>
  </div>

  <div class="hand-area">
    <h3>手札（引いたカードの表面）</h3>
    <div id="handCards" class="hand-cards"></div>
  </div>

</div>
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Tarot App</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #222;
        color: #fff;
        text-align: center;
        padding: 20px;
    }

    select, button {
        padding: 8px;
        margin: 10px;
        font-size: 16px;
    }

    #deck {
        margin-top: 20px;
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 15px;
    }

    .card-slot {
        width: 120px;
        height: 200px;
        border: 2px dashed #888;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #333;
    }

    .card-slot img {
        width: 100%;
        height: 100%;
        border-radius: 10px;
    }
</style>
</head>
<body>

<h1>Tarot Reading</h1>

<!-- スプレッド選択プルダウン -->
<label>スプレッドを選択：</label>
<select id="spreadSelect">
    <option value="1">ワンオラクル（1枚）</option>
    <option value="2">ツーオラクル（2枚）</option>
    <option value="2">ツーマインド（2枚）</option>
    <option value="2">シンプルクロス（2枚）</option>
    <option value="3">スリーカード（3枚）</option>
    <option value="3">ゴールデントリン・スプレッド（3枚）</option>
    <option value="4">フォーカード（4枚）</option>
    <option value="5">ギリシャ十字（5枚）</option>
    <option value="6">ピラミッド（6枚）</option>
    <option value="7">ヘキサグラムスプレッド（7枚）</option>
    <option value="7">二者択一（7枚）</option>
    <option value="10">ケルト十字スプレッド（10枚）</option>
    <option value="13">ホロスコープ・スプレッド（13枚）</option>
</select>

<br>

<button onclick="drawCards()">カードを引く</button>

<div id="deck"></div>

<script>
// カードファイル名生成（例：major_0.jpg 〜 minor_wands_1.jpg など）
const cardImages = [];
const suits = ["wands", "cups", "swords", "pentacles"];

// 大アルカナ 0〜21
for (let i = 0; i <= 21; i++) {
    cardImages.push(`cards/major_${i}.jpg`);
}

// 小アルカナ 4スート×1〜14
for (let suit of suits) {
    for (let num = 1; num <= 14; num++) {
        cardImages.push(`cards/minor_${suit}_${num}.jpg`);
    }
}

// 毎回シャッフルする
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const r = Math.floor(Math.random() * (i + 1));
        [array[i], array[r]] = [array[r], array[i]];
    }
    return array;
}

// カードを引く
function drawCards() {
    const count = parseInt(document.getElementById("spreadSelect").value);

    let deckDiv = document.getElementById("deck");
    deckDiv.innerHTML = ""; // リセット（枠だけを後で生成）

    // シャッフル
    const shuffled = shuffle([...cardImages]);

    // カード枠を表示（はじめは空欄）
    for (let i = 0; i < count; i++) {
        const slot = document.createElement("div");
        slot.className = "card-slot";
        deckDiv.appendChild(slot);
    }

    // 少し遅れて裏面を表示（演出用）
    setTimeout(() => {
        const slots = document.querySelectorAll(".card-slot");

        slots.forEach((slot, index) => {
            const img = document.createElement("img");
            img.src = "cards/back.jpg";  // 裏面
            img.dataset.front = shuffled[index]; // 表のパスを保持
            img.dataset.flipped = "false";

            // クリックしたら表にめくる
            img.onclick = function () {
                if (img.dataset.flipped === "false") {
                    img.src = img.dataset.front;
                    img.dataset.flipped = "true";
                } else {
                    img.src = "cards/back.jpg";
                    img.dataset.flipped = "false";
                }
            };

            slot.appendChild(img);
        });

    }, 200);
}
</script>
</body>
</html>
